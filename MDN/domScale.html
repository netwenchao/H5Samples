<html>

<head>
    <meta charset="utf-8"></meta>
    <script type="text/javascript" src="http://127.0.0.1/Scripts/jquery/jquery-1.7.2.min.js?v=626">
    </script>
    <style type="text/css">
        #zoomWrapper {
            transform-origin: inherit;
            -webkit-transform-origin: inherit;
            -moz-transform-origin: inherit;
            -o-transform-origin: inherit;
            overflow: hidden;
            position: relative;
        }
        
        #zoomWrapper.rate1 {
            overflow: auto;
            position: inherit;
        }
        
        #zoomWrapper.rateg1 {
            overflow: initial;
        }
        
        .zoomPNoneIE {
            transform-origin: 0 0;
            -ms-transform-origin: 0 0;
            -moz-transform-origin: 0 0;
            -webkit-transform-origin: 0 0;
            -o-transform-origin: 0 0;
        }
        
        .rate1 .zoomPNoneIE {
            transform: inherit;
            -ms-transform-origin: inherit;
            -moz-transform-origin: inherit;
            -webkit-transform-origin: inherit;
            -o-transform-origin: inherit;
        }
    </style>
</head>

<body>
    <div style="width: 800px;margin:0 auto; position: fixed; top:0;left:400px;">
        <select id="zoomCtrl" onchange="domZoomer.scale($(this).val())" style="font-size: 24px;">
            <option value="50">50</option>
            <option value="60">60</option>
            <option value="70">70</option>
            <option value="80">80</option>
            <option value="90">90</option>
            <option value="100" selected="selected">100</option>
            <option value="110">110</option>
            <option value="120">120</option>
            <option value="130">130</option>
            <option value="140">140</option>
        </select>
    </div>
    <div style="width:800px;height:100%;margin:0px auto;background-color: #999;overflow:auto;">
        <div id="reportContainer">
            <div style="width:1000px;height:900px;background-color: #FF0000;">
                <div style="width:50%;height:400px;background-color:rgba(255,255,0,0.5)">
                    这个属性设置当前绘线的粗细。属性值必须为正数。默认值是1.0。 线宽是指给定路径的中心到两边的粗细。换句话说就是在路径的两边各绘制线宽的一半。因为画布的坐标并不和像素直接对应，当需要获得精确的水平或垂直线的时候要特别注意。 在下面的例子中，用递增的宽度绘制了10条直线。最左边的线宽1.0单位。并且，最左边的以及所有宽度为奇数的线并不能精确呈现，这就是因为路径的定位问题。这个属性设置当前绘线的粗细。属性值必须为正数。默认值是1.0。 线宽是指给定路径的中心到两边的粗细。换句话说就是在路径的两边各绘制线宽的一半。因为画布的坐标并不和像素直接对应，当需要获得精确的水平或垂直线的时候要特别注意。
                    在下面的例子中，用递增的宽度绘制了10条直线。最左边的线宽1.0单位。并且，最左边的以及所有宽度为奇数的线并不能精确呈现，这就是因为路径的定位问题。
                </div>
                <p>
                    这个属性设置当前绘线的粗细。属性值必须为正数。默认值是1.0。 线宽是指给定路径的中心到两边的粗细。换句话说就是在路径的两边各绘制线宽的一半。因为画布的坐标并不和像素直接对应，当需要获得精确的水平或垂直线的时候要特别注意。 在下面的例子中，用递增的宽度绘制了10条直线。最左边的线宽1.0单位。并且，最左边的以及所有宽度为奇数的线并不能精确呈现，这就是因为路径的定位问题。这个属性设置当前绘线的粗细。属性值必须为正数。默认值是1.0。 线宽是指给定路径的中心到两边的粗细。换句话说就是在路径的两边各绘制线宽的一半。因为画布的坐标并不和像素直接对应，当需要获得精确的水平或垂直线的时候要特别注意。
                    在下面的例子中，用递增的宽度绘制了10条直线。最左边的线宽1.0单位。并且，最左边的以及所有宽度为奇数的线并不能精确呈现，这就是因为路径的定位问题。这个属性设置当前绘线的粗细。属性值必须为正数。默认值是1.0。 线宽是指给定路径的中心到两边的粗细。换句话说就是在路径的两边各绘制线宽的一半。因为画布的坐标并不和像素直接对应，当需要获得精确的水平或垂直线的时候要特别注意。 在下面的例子中，用递增的宽度绘制了10条直线。最左边的线宽1.0单位。并且，最左边的以及所有宽度为奇数的线并不能精确呈现，这就是因为路径的定位问题。这个属性设置当前绘线的粗细。属性值必须为正数。默认值是1.0。
                    线宽是指给定路径的中心到两边的粗细。换句话说就是在路径的两边各绘制线宽的一半。因为画布的坐标并不和像素直接对应，当需要获得精确的水平或垂直线的时候要特别注意。 在下面的例子中，用递增的宽度绘制了10条直线。最左边的线宽1.0单位。并且，最左边的以及所有宽度为奇数的线并不能精确呈现，这就是因为路径的定位问题。
                </p>
            </div>
        </div>
    </div>
    <script type="text/javascript">
        function isIE() {
            return navigator.userAgent.indexOf("MSIE") > -1;
        }

        function doZoom() {
            var zVal = $("#zoomCtrl").val();
            var zoom = parseInt(zVal) / 100;
            var zoomProviderTag = null;
            var contentNode = $("#content");

            if (isIE()) {
                zoomProviderTag = '<div style="zoom: ' + zoom + ';">';
            } else {
                zoomProviderTag = ['<div class="zoomPNoneIE" style="',
                    'transform:scale(' + zoom + '); ',
                    '-ms-transform:scale(' + zoom + '); ',
                    '-moz-transform:scale(' + zoom + '); ',
                    '-webkit-transform:scale(' + zoom + '); ',
                    '-o-transform:scale(' + zoom + ');',
                    '">'
                ].join("");
            }
            var reportOriginSize = {
                width: 1000,
                height: 1200
            };
            var winSize = {
                width: 800,
                height: 800
            };
            var leftFix = (winSize.width - reportOriginSize.width * zoom) / 2;
            var zoomWrapper = $("#zoomWrapper");
            if (zoomWrapper.size() > 0) {
                if (zoom == 1) {
                    //content
                    var cnt = $("#content");
                    cnt.appendTo(zoomWrapper.parent());
                    zoomWrapper.remove();
                    return;
                }

                zoomWrapper.css({
                    "width": (winSize.width - leftFix) + "px",
                    "height": winSize.height + "px",
                    "padding-left": leftFix + 'px'
                });

                zoomWrapper.find(".zoomPNoneIE").css({
                    'transform': 'scale(' + zoom + ')',
                    '-ms-transform': 'scale(' + zoom + ')',
                    '-moz-transform': 'scale(' + zoom + ')',
                    '-webkit-transform': 'scale(' + zoom + ')',
                    '-o-transform': 'scale(' + zoom + ')'
                });
            } else {
                var zoomWrapperHtml = [
                    '<div id="zoomWrapper" style=" width: ' + (winSize.width - leftFix) + 'px; height: ' + winSize.height + 'px; padding-left: ' + leftFix + 'px;">',
                    zoomProviderTag,
                    //'<div style="width: ' + reportOriginSize.width + 'px; height: ' + reportOriginSize.height + 'px;"></div>',
                    '<div style="width: auto; height:auto"></div>',
                    '</div>',
                    '</div>'
                ].join("");
                zoomWrapper = $(zoomWrapperHtml).appendTo(contentNode.parent());
            }

            if (zoom > 1) {
                zoomWrapper.removeClass("rate1")
                zoomWrapper.addClass("rateg1")
            } else if (zoom < 1) {
                zoomWrapper.removeClass("rate1")
                zoomWrapper.removeClass("rateg1");
            }
            contentNode.appendTo(zoomWrapper.find(">div:eq(0)>div:eq(0)"));

        };

        var domZoomer = (function() {
            var DomZoomer = function() {
                var isIE = function() {
                    return navigator.userAgent.indexOf("MSIE") > -1;
                };

                var node = null;
                var getWrapper = function() {
                    var wrapperId = "zoomWrapper";
                    var wrapper = null;
                    if ((wrapper = $("#" + wrapperId)).size() > 0) {
                        return wrapper;
                    }

                    //width,height,padding-left
                    var wrapper = $("<div id=\"zoomWrapper\"><div class=\"zoomer\"><div style=\"width:auto;height:auto;\"></div></div></div>");
                    var zoomer = wrapper.find(".zoomer");
                    if (!isIE()) {
                        zoomer.addClass("zoomPNoneIE");
                    }
                    wrapper.insertBefore(node);
                    wrapper.find(">div:eq(0)>div:eq(0)").append(node);
                    return wrapper;
                };

                var getZoomCss = (function() {
                    return isIE() ? function(r) {
                        return {
                            "zoom": (r * 100) + "%"
                        };
                    } : function(r) {
                        return {
                            "transform": "scale(" + r + ")",
                            "-ms-transform": "scale(" + r + ")",
                            "-moz-transform": "scale(" + r + ")",
                            "-webkit-transform": "scale(" + r + ")",
                            "-o-transform": "scale(" + r + ")"
                        };
                    };
                })();

                var setScale = function(wrapper, rate) {
                    wrapper.find(".zoomer").css(getZoomCss(rate));
                    var scared = originSize.scaled(rate);
                    wrapper.css(scared);
                    //margin-left
                    //debugger;
                    console.log(originSize);
                    console.log(scared);
                    wrapper.css("margin-left", Math.round((originSize.width - scared.width) / 2));
                };

                var originSize = {
                    width: 0,
                    height: 0,
                    scaled: function(r) {
                        return {
                            width: r * this.width,
                            height: r * this.height
                        };
                    },
                    saveToNode: function() {
                        node.attr("zoomer_OriginW", this.width);
                        node.attr("zoomer_OriginH", this.height);
                    },
                    refresh: function() {
                        originSize.width = node.width();
                        originSize.height = node.height();
                    }
                };

                this.init = function(ele) {
                    node = $(ele);
                    originSize.refresh();
                };

                this.scale = function(rate) {
                    var w = getWrapper();
                    var r = parseInt(rate);
                    setScale(w, rate / 100);
                    if (r < 100) {
                        w.removeClass("rate1")
                        w.removeClass("rateg1");
                    } else if (r > 100) {
                        w.removeClass("rate1")
                        w.addClass("rateg1")
                    } else { //eq 1
                        w.addClass("rate1");
                        w.removeClass("rateg1")
                    }
                };
            };
            return new DomZoomer();
        })();
        domZoomer.init($("#reportContainer"));
    </script>
</body>

</html>